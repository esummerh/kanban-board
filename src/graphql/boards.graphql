query Boards {
  boards {
    id
    name
  }
}

query GetBoards {
  boards(where: { user_id: { _eq: "X-Hasura-User-Id" } }) {
    id
    name
  }
}

query GetBoard($id: uuid!) {
  boards_by_pk(id: $id) {
    id
    name
    columns(order_by: { order: asc }) {
      id
      name
      order
      cards(order_by: { order: asc }) {
        id
        title
        description
        order
      }
    }
  }
}

mutation InsertBoard($name: String!) {
  insert_boards_one(object: { name: $name }) {
    id
    name
  }
}

mutation InsertColumns($objects: [columns_insert_input!]!) {
  insert_columns(objects: $objects) {
    affected_rows
  }
}

mutation DeleteBoard($id: uuid!) {
  delete_boards_by_pk(id: $id) {
    id
  }
}

mutation UpdateColumn($id: uuid!, $name: String!) {
  update_columns_by_pk(pk_columns: { id: $id }, _set: { name: $name }) {
    id
    name
  }
}

mutation InsertCard($column_id: uuid!, $title: String!, $description: String!) {
  insert_cards_one(
    object: { column_id: $column_id, title: $title, description: $description }
  ) {
    id
    title
    description
  }
}

mutation DeleteCard($id: uuid!) {
  delete_cards_by_pk(id: $id) {
    id
  }
}

mutation DeleteColumn($id: uuid!) {
  delete_columns_by_pk(id: $id) {
    id
  }
}

mutation UpdateColumnOrder($id: uuid!, $order: Int!) {
  update_columns_by_pk(pk_columns: { id: $id }, _set: { order: $order }) {
    id
    order
  }
}

mutation UpdateCardOrder($id: uuid!, $order: Int!, $column_id: uuid) {
  update_cards_by_pk(
    pk_columns: { id: $id }
    _set: { order: $order, column_id: $column_id }
  ) {
    id
    order
    column_id
  }
}

subscription OnBoardUpdated($boardId: uuid!) {
  boards_by_pk(id: $boardId) {
    id
    name
    columns(order_by: { order: asc }) {
      id
      name
      order
      cards(order_by: { order: asc }) {
        id
        title
        description
        order
      }
    }
  }
}
